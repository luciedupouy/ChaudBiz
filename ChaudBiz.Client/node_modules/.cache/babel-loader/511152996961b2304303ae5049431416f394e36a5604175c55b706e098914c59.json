{"ast":null,"code":"import React,{useState,useEffect}from'react';import Navordi from'../components/Navordi';import axios from'axios';import'../styles/Login.css';import'../styles/Global.css';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Chantier=()=>{const[type,setType]=useState(0);const[description,setDescription]=useState('');const[dateDebut,setDateDebut]=useState('');const[dateFin,setDateFin]=useState('');const[adresse,setAdresse]=useState('');const[client,setClient]=useState('');const[clientsList,setClientsList]=useState([]);const[ajoutOk,setAjout]=useState(false);useEffect(()=>{const fetchClients=async()=>{try{const response=await axios.get('http://localhost:5257/api/client');if(response&&response.data){setClientsList(response.data);}}catch(error){console.error('Erreur lors de la récupération des clients:',error);}};fetchClients();},[]);const types=['CLIMATISATION','POMPE','CHAUDIERE'];const getTypeValue=type=>{switch(type){case'CLIMATISATION':return 0;case'POMPE':return 1;case'CHAUDIERE':return 2;default:return-1;// Valeur par défaut ou valeur incorrecte\n}};const handleDateDebutChange=event=>{setDateDebut(event.target.value);};const handleDateFinChange=event=>{setDateFin(event.target.value);};const ajoutChantier=async()=>{try{const response=await axios.post('http://localhost:5257/api/chantier/',{Type:getTypeValue(type),Description:description,DateDebut:dateDebut,DateFin:dateFin,Adresse:adresse,Client:client});if(response&&response.data){console.log('Réponse du serveur:',response.data);setAjout(true);}else{console.error('Réponse du serveur non valide:',response);}}catch(error){console.error('Erreur lors de la requête:',error.response?error.response.data:error.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(Navordi,{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Ajout d'un chantier\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/client\",className:\"bouton\",children:\"Cr\\xE9er un client\"})}),/*#__PURE__*/_jsxs(\"select\",{value:type,onChange:e=>setType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionnez le type de chantier\"}),types.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r,children:r},r))]}),/*#__PURE__*/_jsxs(\"select\",{value:client,onChange:e=>setClient(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionnez le client\"}),clientsList.map(client=>/*#__PURE__*/_jsx(\"option\",{value:client.clientId,children:client.nomClient},client.clientId))]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Entrez l'adresse\",value:adresse,onChange:e=>setAdresse(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Description\",value:description,onChange:e=>setDescription(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"date-selector\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"dateDebut\",children:\"Date et heure de d\\xE9but :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",id:\"dateDebut\",name:\"dateDebut\",value:dateDebut,onChange:handleDateDebutChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"date-selector\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"dateFin\",children:\"Date et heure de fin :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",id:\"dateFin\",name:\"dateFin\",value:dateFin,onChange:handleDateFinChange})]}),/*#__PURE__*/_jsx(Link,{to:\"/planninga\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:ajoutChantier,children:\"Ajouter\"})})]})]});};export default Chantier;","map":{"version":3,"names":["React","useState","useEffect","Navordi","axios","Link","jsx","_jsx","jsxs","_jsxs","Chantier","type","setType","description","setDescription","dateDebut","setDateDebut","dateFin","setDateFin","adresse","setAdresse","client","setClient","clientsList","setClientsList","ajoutOk","setAjout","fetchClients","response","get","data","error","console","types","getTypeValue","handleDateDebutChange","event","target","value","handleDateFinChange","ajoutChantier","post","Type","Description","DateDebut","DateFin","Adresse","Client","log","message","className","children","to","onChange","e","map","r","clientId","nomClient","placeholder","htmlFor","id","name","onClick"],"sources":["/Users/luciedupouy/chaudbiz/ChaudBiz.Client/src/pages/Chantier.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Navordi from '../components/Navordi';\nimport axios from 'axios';\nimport '../styles/Login.css';\nimport '../styles/Global.css';\nimport { Link } from 'react-router-dom';\n\nconst Chantier = () => {\n    const [type, setType] = useState(0);\n    const [description, setDescription] = useState('');\n    const [dateDebut, setDateDebut] = useState('');\n    const [dateFin, setDateFin] = useState('');\n    const [adresse, setAdresse] = useState('');\n    const [client, setClient] = useState('');\n    const [clientsList, setClientsList] = useState([]);\n    const [ajoutOk, setAjout] = useState(false);\n\n    useEffect(() => {\n        const fetchClients = async () => {\n            try {\n                const response = await axios.get('http://localhost:5257/api/client');\n                if (response && response.data) {\n                    setClientsList(response.data);\n                }\n            } catch (error) {\n                console.error('Erreur lors de la récupération des clients:', error);\n            }\n        };\n\n        fetchClients();\n    }, []);\n\n    const types = ['CLIMATISATION', 'POMPE', 'CHAUDIERE'];\n\n    const getTypeValue = (type) => {\n        switch (type) {\n            case 'CLIMATISATION':\n                return 0;\n            case 'POMPE':\n                return 1;\n            case 'CHAUDIERE':\n                return 2;\n            default:\n                return -1; // Valeur par défaut ou valeur incorrecte\n        }\n    };\n\n    const handleDateDebutChange = (event) => {\n        setDateDebut(event.target.value);\n    };\n\n    const handleDateFinChange = (event) => {\n        setDateFin(event.target.value);\n    };\n\n    const ajoutChantier = async () => {\n        try {\n            const response = await axios.post('http://localhost:5257/api/chantier/', {\n                Type: getTypeValue(type),\n                Description: description,\n                DateDebut: dateDebut,\n                DateFin: dateFin,\n                Adresse: adresse,\n                Client: client,\n            });\n\n            if (response && response.data) {\n                console.log('Réponse du serveur:', response.data);\n                setAjout(true);\n            } else {\n                console.error('Réponse du serveur non valide:', response);\n            }\n        } catch (error) {\n            console.error('Erreur lors de la requête:', error.response ? error.response.data : error.message);\n        }\n    };\n\n    return (\n        <div className='login'>\n            <Navordi />\n            <h1>Ajout d'un chantier</h1>\n            <form>\n            <p>\n                    <Link to=\"/client\" className=\"bouton\">Créer un client</Link>\n                \n            </p>\n                <select value={type} onChange={(e) => setType(e.target.value)}>\n                    <option value=\"\">Sélectionnez le type de chantier</option>\n                    {types.map((r) => (\n                        <option key={r} value={r}>\n                            {r}\n                        </option>\n                    ))}\n                </select>\n                <select value={client} onChange={(e) => setClient(e.target.value)}>\n                    <option value=\"\">Sélectionnez le client</option>\n                    {clientsList.map((client) => (\n                        <option key={client.clientId} value={client.clientId}>\n                            {client.nomClient}\n                        </option>\n                    ))}\n                </select>\n               \n                <input\n                    type=\"text\"\n                    placeholder=\"Entrez l'adresse\"\n                    value={adresse}\n                    onChange={(e) => setAdresse(e.target.value)}\n                />\n                <input\n                    type=\"text\"\n                    placeholder=\"Description\"\n                    value={description}\n                    onChange={(e) => setDescription(e.target.value)}\n                />\n                <div className=\"date-selector\">\n                    <label htmlFor=\"dateDebut\">Date et heure de début :</label>\n                    <input\n                        type=\"datetime-local\"\n                        id=\"dateDebut\"\n                        name=\"dateDebut\"\n                        value={dateDebut}\n                        onChange={handleDateDebutChange}\n                    />\n                </div>\n                <div className=\"date-selector\">\n                    <label htmlFor=\"dateFin\">Date et heure de fin :</label>\n                    <input\n                        type=\"datetime-local\"\n                        id=\"dateFin\"\n                        name=\"dateFin\"\n                        value={dateFin}\n                        onChange={handleDateFinChange}\n                    />\n                </div>\n                <Link to=\"/planninga\">\n                <button type=\"button\" onClick={ajoutChantier}>\n                    Ajouter\n                </button>\n                </Link>\n            </form>\n        </div>\n    );\n}\n\nexport default Chantier;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
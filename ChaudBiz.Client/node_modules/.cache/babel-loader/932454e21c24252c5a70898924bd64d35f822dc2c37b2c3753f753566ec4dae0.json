{"ast":null,"code":"import React,{useState,useEffect}from'react';import BottomNavbar from'../components/Navbar';import Header from'../components/Header';import ChantierBox from'../components/ChantierBox';import'../styles/AccueilO.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Planning=()=>{const today=new Date();const initialDate=today.toISOString().slice(0,10);// Date sélectionnée par défaut est la date actuelle au format \"YYYY-MM-DD\"\nconst[selectedDate,setSelectedDate]=useState(initialDate);const[chantiers,setChantiers]=useState([]);const handleDateChange=event=>{setSelectedDate(event.target.value);};useEffect(()=>{fetch(\"http://localhost:5257/api/chantier/by-date/\".concat(selectedDate)).then(response=>{if(!response.ok){throw new Error('Failed to fetch chantiers');}return response.json();}).then(data=>{setChantiers(data);}).catch(error=>console.error('Error fetching chantiers:',error));},[selectedDate]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{titre:\"Planning\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"date-selector\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"S\\xE9lectionnez une date :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"date\",name:\"date\",value:selectedDate,onChange:handleDateChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ouvr\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Chantiers pr\\xE9vus pour le \",selectedDate]}),chantiers.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"chantiers\",children:chantiers.map(chantier=>/*#__PURE__*/_jsx(ChantierBox,{chantierId:chantier.chantierId},chantier.chantierId))}):/*#__PURE__*/_jsx(\"p\",{children:\"Aucun chantier pr\\xE9vu pour cette date.\"})]}),/*#__PURE__*/_jsx(BottomNavbar,{})]});};export default Planning;","map":{"version":3,"names":["React","useState","useEffect","BottomNavbar","Header","ChantierBox","jsx","_jsx","jsxs","_jsxs","Planning","today","Date","initialDate","toISOString","slice","selectedDate","setSelectedDate","chantiers","setChantiers","handleDateChange","event","target","value","fetch","concat","then","response","ok","Error","json","data","catch","error","console","children","titre","className","htmlFor","type","id","name","onChange","length","map","chantier","chantierId"],"sources":["/Users/luciedupouy/chaudbiz/ChaudBiz.Client/src/pages/Planning.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport BottomNavbar from '../components/Navbar';\nimport Header from '../components/Header';\nimport ChantierBox from '../components/ChantierBox';\nimport '../styles/AccueilO.css';\n\nconst Planning = () => {\n    const today = new Date();\n    const initialDate = today.toISOString().slice(0, 10); // Date sélectionnée par défaut est la date actuelle au format \"YYYY-MM-DD\"\n    const [selectedDate, setSelectedDate] = useState(initialDate); \n    const [chantiers, setChantiers] = useState([]);\n  \n    const handleDateChange = (event) => {\n      setSelectedDate(event.target.value);\n    };\n  \n    useEffect(() => {\n      fetch(`http://localhost:5257/api/chantier/by-date/${selectedDate}`)\n        .then(response => {\n          if (!response.ok) {\n            throw new Error('Failed to fetch chantiers');\n          }\n          return response.json();\n        })\n        .then(data => {\n          setChantiers(data);\n        })\n        .catch(error => console.error('Error fetching chantiers:', error));\n    }, [selectedDate]);\n  \n    return (\n      <div>\n        <Header titre=\"Planning\" />\n        <div className=\"date-selector\">\n          <label htmlFor=\"date\">Sélectionnez une date :</label>\n          <input\n            type=\"date\"\n            id=\"date\"\n            name=\"date\"\n            value={selectedDate}\n            onChange={handleDateChange}\n          />\n        </div>\n        <div className=\"ouvr\">\n          <h3>Chantiers prévus pour le {selectedDate}</h3>\n          {chantiers.length > 0 ? (\n            <div className=\"chantiers\">\n              {chantiers.map(chantier => (\n                <ChantierBox key={chantier.chantierId} chantierId={chantier.chantierId} />\n              ))}\n            </div>\n          ) : (\n            <p>Aucun chantier prévu pour cette date.</p>\n          )}\n        </div>\n        <BottomNavbar />\n      </div>\n    );\n  };\n  \n  export default Planning;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,YAAY,KAAM,sBAAsB,CAC/C,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,MAAO,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEhC,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CACxB,KAAM,CAAAC,WAAW,CAAGF,KAAK,CAACG,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAAE;AACtD,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGhB,QAAQ,CAACY,WAAW,CAAC,CAC7D,KAAM,CAACK,SAAS,CAAEC,YAAY,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAE9C,KAAM,CAAAmB,gBAAgB,CAAIC,KAAK,EAAK,CAClCJ,eAAe,CAACI,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CACrC,CAAC,CAEDrB,SAAS,CAAC,IAAM,CACdsB,KAAK,+CAAAC,MAAA,CAA+CT,YAAY,CAAE,CAAC,CAChEU,IAAI,CAACC,QAAQ,EAAI,CAChB,GAAI,CAACA,QAAQ,CAACC,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,2BAA2B,CAAC,CAC9C,CACA,MAAO,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CACxB,CAAC,CAAC,CACDJ,IAAI,CAACK,IAAI,EAAI,CACZZ,YAAY,CAACY,IAAI,CAAC,CACpB,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,EAAIC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CAAC,CACtE,CAAC,CAAE,CAACjB,YAAY,CAAC,CAAC,CAElB,mBACEP,KAAA,QAAA0B,QAAA,eACE5B,IAAA,CAACH,MAAM,EAACgC,KAAK,CAAC,UAAU,CAAE,CAAC,cAC3B3B,KAAA,QAAK4B,SAAS,CAAC,eAAe,CAAAF,QAAA,eAC5B5B,IAAA,UAAO+B,OAAO,CAAC,MAAM,CAAAH,QAAA,CAAC,4BAAuB,CAAO,CAAC,cACrD5B,IAAA,UACEgC,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,MAAM,CACTC,IAAI,CAAC,MAAM,CACXlB,KAAK,CAAEP,YAAa,CACpB0B,QAAQ,CAAEtB,gBAAiB,CAC5B,CAAC,EACC,CAAC,cACNX,KAAA,QAAK4B,SAAS,CAAC,MAAM,CAAAF,QAAA,eACnB1B,KAAA,OAAA0B,QAAA,EAAI,8BAAyB,CAACnB,YAAY,EAAK,CAAC,CAC/CE,SAAS,CAACyB,MAAM,CAAG,CAAC,cACnBpC,IAAA,QAAK8B,SAAS,CAAC,WAAW,CAAAF,QAAA,CACvBjB,SAAS,CAAC0B,GAAG,CAACC,QAAQ,eACrBtC,IAAA,CAACF,WAAW,EAA2ByC,UAAU,CAAED,QAAQ,CAACC,UAAW,EAArDD,QAAQ,CAACC,UAA8C,CAC1E,CAAC,CACC,CAAC,cAENvC,IAAA,MAAA4B,QAAA,CAAG,0CAAqC,CAAG,CAC5C,EACE,CAAC,cACN5B,IAAA,CAACJ,YAAY,GAAE,CAAC,EACb,CAAC,CAEV,CAAC,CAED,cAAe,CAAAO,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}
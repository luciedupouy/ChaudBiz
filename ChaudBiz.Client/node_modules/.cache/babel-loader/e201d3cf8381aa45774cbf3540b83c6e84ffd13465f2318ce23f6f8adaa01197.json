{"ast":null,"code":"import React,{useState,useEffect}from'react';import'../styles/TodoMateriel.css';import Navordi from'../components/Navordi';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const MaterielAttente=()=>{const[materiels,setMateriels]=useState([]);const[showPopup,setShowPopup]=useState(false);// État pour afficher ou masquer le pop-up\nuseEffect(()=>{fetch('http://localhost:5257/api/materiel/by-etat/1').then(response=>response.json()).then(data=>setMateriels(data)).catch(error=>console.error('Error fetching matériel details',error));},[]);const commanderMateriel=async id=>{try{const response=await fetch(\"http://localhost:5257/api/materiel/\".concat(id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({materielId:id,etat:0})// Envoyer l'état mis à jour\n});if(response.ok){setShowPopup(true);// Afficher le pop-up après avoir envoyé la requête avec succès\n// Mettre à jour l'état du matériel localement\nsetMateriels(prevMateriels=>prevMateriels.map(materiel=>{if(materiel.materielId===id){return{...materiel,etat:0};// Mettre à jour l'état du matériel\n}return materiel;}));}else{console.error('Failed to update matériel status');}}catch(error){console.error('Error updating matériel status',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"materielcommande\",children:[/*#__PURE__*/_jsx(Navordi,{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Mat\\xE9riels \\xE0 commander\"}),/*#__PURE__*/_jsx(\"div\",{className:\"materiel\",children:materiels.map((materiel,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"outil\",children:[/*#__PURE__*/_jsx(\"span\",{children:materiel.label}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>commanderMateriel(materiel.materielId),children:\"Commander\"})]},index))}),showPopup&&/*#__PURE__*/_jsx(\"div\",{className:\"popup-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Votre commande est pass\\xE9e ! \"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPopup(false),children:\"Fermer\"})]})})]});};export default MaterielAttente;","map":{"version":3,"names":["React","useState","useEffect","Navordi","jsx","_jsx","jsxs","_jsxs","MaterielAttente","materiels","setMateriels","showPopup","setShowPopup","fetch","then","response","json","data","catch","error","console","commanderMateriel","id","concat","method","headers","body","JSON","stringify","materielId","etat","ok","prevMateriels","map","materiel","className","children","index","label","onClick"],"sources":["/Users/luciedupouy/chaudbiz/ChaudBiz.Client/src/pages/MaterielAttente.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport '../styles/TodoMateriel.css'\nimport Navordi from '../components/Navordi';\n\nconst MaterielAttente = () => {\n    const [materiels, setMateriels] = useState([]);\n    const [showPopup, setShowPopup] = useState(false); // État pour afficher ou masquer le pop-up\n\n    useEffect(() => {\n        fetch('http://localhost:5257/api/materiel/by-etat/1')\n            .then(response => response.json())\n            .then(data => setMateriels(data))\n            .catch(error => console.error('Error fetching matériel details', error));\n    }, []);\n\n    const commanderMateriel = async (id) => {\n        try {\n            const response = await fetch(`http://localhost:5257/api/materiel/${id}`, {\n                method: 'PUT',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ materielId: id, etat: 0 }) // Envoyer l'état mis à jour\n            });\n            if (response.ok) {\n                setShowPopup(true); // Afficher le pop-up après avoir envoyé la requête avec succès\n                // Mettre à jour l'état du matériel localement\n                setMateriels(prevMateriels => \n                    prevMateriels.map(materiel => {\n                        if (materiel.materielId === id) {\n                            return { ...materiel, etat: 0 }; // Mettre à jour l'état du matériel\n                        }\n                        return materiel;\n                    })\n                );\n            } else {\n                console.error('Failed to update matériel status');\n            }\n        } catch (error) {\n            console.error('Error updating matériel status', error);\n        }\n    };\n    \n    \n\n    return (\n        <div className='materielcommande'>\n            <Navordi></Navordi>\n            <h1>Matériels à commander</h1>\n            <div className='materiel'>\n                {materiels.map((materiel, index) => (\n                    <div key={index} className=\"outil\">\n                        <span>{materiel.label}</span>\n                        <button onClick={() => commanderMateriel(materiel.materielId)}>Commander</button>\n                    </div>\n                ))}\n            </div>\n\n            {/* Pop-up */}\n            {showPopup && (\n                <div className=\"popup-overlay\">\n                    <div className=\"popup-content\">\n                    <p>Votre commande est passée ! </p>\n                    <button onClick={() => setShowPopup(false)}>Fermer</button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default MaterielAttente;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}